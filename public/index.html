<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shifter</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üóìÔ∏è</text></svg>">

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="css/tailwind.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body
    class="bg-[#F2F2F7] text-black dark:bg-black dark:text-white font-sans min-h-screen flex flex-col selection:bg-blue-500 selection:text-white pb-safe">
    <div id="topProgressBar" class="top-progress-bar"></div>
    <div id="toastContainer"
        class="fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] space-y-2 w-full max-w-xs pointer-events-none">
    </div>

    <div id="loginScreen" class="hidden flex-grow flex items-center justify-center p-6 min-h-screen">
        <div class="ios-card p-8 w-full max-w-sm text-center relative overflow-hidden transition-all duration-300">
            <h1
                class="text-4xl font-bold mb-2 tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-500 to-indigo-600">
                Shifter</h1>

            <div id="loginContainer" class="transition-opacity duration-300">
                <p class="text-gray-400 mb-6 text-sm">–£–≤—ñ–π–¥—ñ—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø—É</p>
                <div class="space-y-3">
                    <input type="text" id="loginUser" placeholder="–õ–æ–≥—ñ–Ω" class="ios-input">
                    <input type="password" id="loginPass" placeholder="–ü–∞—Ä–æ–ª—å" class="ios-input">
                    <button onclick="login()" class="btn-primary mt-4 shadow-lg shadow-blue-500/30">–£–≤—ñ–π—Ç–∏</button>

                    <div
                        class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-800 flex justify-between items-center px-1">
                        <button onclick="toggleAuthMode('forgot')"
                            class="text-sm text-gray-500 hover:text-black dark:hover:text-white font-medium hover:underline transition-colors">–ó–∞–±—É–ª–∏
                            –ø–∞—Ä–æ–ª—å?</button>
                        <button onclick="toggleAuthMode('register')"
                            class="text-sm text-blue-500 font-medium hover:underline">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
                    </div>
                </div>
            </div>

            <div id="registerContainer" class="hidden transition-opacity duration-300">
                <p class="text-gray-400 mb-4 text-sm">–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É</p>
                <div class="space-y-3 text-left">

                    <div>
                        <label class="block text-[10px] uppercase font-bold text-gray-400 ml-2 mb-1">–ü–Ü–ü</label>
                        <input type="text" id="regFullName" placeholder="–Ü–≤–∞–Ω–æ–≤ –Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤–∏—á" class="ios-input">
                    </div>

                    <div>
                        <label class="block text-[10px] uppercase font-bold text-gray-400 ml-2 mb-1">–õ–æ–≥—ñ–Ω</label>
                        <input type="text" id="regLogin" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥—ñ–Ω" class="ios-input">
                    </div>

                    <div class="grid grid-cols-2 gap-2">
                        <div>
                            <label class="block text-[10px] uppercase font-bold text-gray-400 ml-2 mb-1">–ü–∞—Ä–æ–ª—å</label>
                            <input type="password" id="regPass" placeholder="******" class="ios-input">
                        </div>
                        <div>
                            <label class="block text-[10px] uppercase font-bold text-gray-400 ml-2 mb-1">–©–µ —Ä–∞–∑</label>
                            <input type="password" id="regPassConfirm" placeholder="******" class="ios-input">
                        </div>
                    </div>

                    <div>
                        <label class="block text-[10px] uppercase font-bold text-gray-400 ml-2 mb-1">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="tel" id="regPhone" placeholder="+380–•–•–•–•–•–•–•–•–•" class="ios-input">
                    </div>

                    <div>
                        <label class="block text-[10px] uppercase font-bold text-gray-400 ml-2 mb-1">Email</label>
                        <input type="email" id="regEmail" placeholder="example@mail.com" class="ios-input">
                    </div>

                    <div class="relative">
                        <label class="text-[10px] uppercase font-bold text-gray-400 ml-2 mb-1 block">–ú–∞–≥–∞–∑–∏–Ω</label>
                        <div class="relative">
                            <select id="regStore" class="ios-input bg-transparent appearance-none w-full">
                                <option value="" disabled selected>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É...</option>
                            </select>
                            <div class="absolute right-3 top-3.5 text-gray-400 pointer-events-none">‚ñº</div>
                        </div>
                    </div>

                    <button onclick="registerUser()"
                        class="btn-primary mt-4 bg-green-500 shadow-lg shadow-green-500/30">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç</button>

                    <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-800 text-center">
                        <button onclick="toggleAuthMode('login')"
                            class="text-sm text-gray-500 hover:text-black dark:hover:text-white transition-colors">‚Üê
                            –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –≤—Ö–æ–¥—É</button>
                    </div>
                </div>
            </div>

            <!-- Forgot Password Container -->
            <div id="forgotPasswordContainer" class="hidden transition-opacity duration-300">
                <p class="text-gray-400 mb-4 text-sm">–°–∫–∏–¥–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è</p>
                <div class="space-y-3 text-left">
                    <p class="text-xs text-gray-500 mb-2">
                        –í–≤–µ–¥—ñ—Ç—å —Å–≤—ñ–π –ª–æ–≥—ñ–Ω, —ñ –º–∏ –Ω–∞–¥—ñ—à–ª–µ–º–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó —É –≤–∞—à –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¢–µ–ª–µ–≥—Ä–∞–º.
                    </p>
                    <div>
                        <input type="text" id="forgotUsername" placeholder="–í–∞—à –õ–æ–≥—ñ–Ω" class="ios-input">
                    </div>

                    <button onclick="requestPasswordReset()"
                        class="btn-primary mt-4 bg-purple-500 shadow-lg shadow-purple-500/30">–í—ñ–¥–Ω–æ–≤–∏—Ç–∏ –ø–∞—Ä–æ–ª—å</button>

                    <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-800 text-center">
                        <button onclick="toggleAuthMode('login')"
                            class="text-sm text-gray-500 hover:text-black dark:hover:text-white transition-colors">‚Üê
                            –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –≤—Ö–æ–¥—É</button>
                    </div>
                </div>
            </div>

            <!-- Reset Password Container (Appears when Token is in URL) -->
            <div id="resetPasswordContainer" class="hidden transition-opacity duration-300">
                <p class="text-gray-400 mb-4 text-sm">–ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å</p>
                <div class="space-y-3 text-left">
                    <p class="text-xs text-gray-500 mb-2">
                        –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–æ–≤–∏–π –±–µ–∑–ø–µ—á–Ω–∏–π –ø–∞—Ä–æ–ª—å.
                    </p>
                    <input type="hidden" id="resetToken">
                    <input type="hidden" id="resetUserId">

                    <div>
                        <input type="password" id="resetNewPassword" placeholder="–ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å" class="ios-input mb-2">
                        <input type="password" id="resetConfirmPassword" placeholder="–ü–æ–≤—Ç–æ—Ä—ñ—Ç—å –ø–∞—Ä–æ–ª—å"
                            class="ios-input">
                    </div>

                    <button onclick="submitNewPassword()" class="btn-primary mt-4 shadow-lg shadow-blue-500/30">–ó–±–µ—Ä–µ–≥—Ç–∏
                        –ø–∞—Ä–æ–ª—å</button>

                    <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-800 text-center">
                        <button onclick="toggleAuthMode('login')"
                            class="text-sm text-gray-500 hover:text-black dark:hover:text-white transition-colors">‚Üê
                            –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –≤—Ö–æ–¥—É</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div id="appScreen"
        class="hidden w-full pb-36 lg:pb-safe lg:pl-64 relative opacity-0 transition-opacity duration-500">

        <!-- SIDEBAR FOR DESKTOP -->
        <div id="desktop-sidebar-container"></div>

        <!-- MOBILE NAVBAR -->
        <div id="mobile-navbar-container"></div>

        <div class="container mx-auto p-4 max-w-[95%] lg:max-w-4xl space-y-4">

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –î–∞—à–±–æ—Ä–¥—É -->
            <div id="dashboard-container"></div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
            <div id="admin-container"></div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ì–æ–ª–æ–≤–Ω–æ—ó (–°–ø–∏—Å–æ–∫) -->
            <div id="list-container"></div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ö–∞–ª–µ–Ω–¥–∞—Ä—è -->
            <div id="calendar-container"></div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¢–∞–±–ª–∏—Ü—ñ (Grid) -->
            <div id="grid-container"></div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è KPI -->
            <div id="kpi-container"></div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ü—Ä–æ—Ñ—ñ–ª—é -->
            <div id="profile-container"></div>

        </div>

        <button id="backToTopBtn" onclick="scrollToTop()"
            class="fixed bottom-24 right-6 w-12 h-12 bg-blue-500 text-white rounded-full shadow-lg shadow-blue-500/40 flex items-center justify-center text-2xl z-50 transition-all duration-300 opacity-0 hidden hover:scale-110 active:scale-95">‚Üë</button>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å—ñ—Ö –º–æ–¥–∞–ª–æ–∫ -->
        <div id="modals-container"></div>

        <script type="module" src="js/app.js"></script>
</body>

</html>